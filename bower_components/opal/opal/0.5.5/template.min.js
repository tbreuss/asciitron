(function($opal){var self=$opal.top,$scope=$opal,nil=$opal.nil,$breaker=$opal.breaker,$slice=$opal.slice,$klass=$opal.klass,$hash2=$opal.hash2;$opal.add_stubs(["$[]","$[]=","$keys","$attr_reader","$instance_exec","$to_proc","$new","$<<","$join"]);return function($base,$super){function $Template(){}var self=$Template=$klass($base,$super,"Template",$Template);var def=$Template._proto,$scope=$Template._scope,TMP_1;def.name=def.body=nil;self._cache=$hash2([],{});$opal.defs(self,"$[]",function(name){var self=this;if(self._cache==null)self._cache=nil;return self._cache["$[]"](name)});$opal.defs(self,"$[]=",function(name,instance){var self=this;if(self._cache==null)self._cache=nil;return self._cache["$[]="](name,instance)});$opal.defs(self,"$paths",function(){var self=this;if(self._cache==null)self._cache=nil;return self._cache.$keys()});self.$attr_reader("body");def.$initialize=TMP_1=function(name){var $a,self=this,$iter=TMP_1._p,body=$iter||nil;TMP_1._p=null;$a=[name,body],self.name=$a[0],self.body=$a[1];return $scope.Template["$[]="](name,self)};def.$inspect=function(){var self=this;return"#<Template: '"+self.name+"'>"};def.$render=function(ctx){var $a,$b,self=this;if(ctx==null){ctx=self}return($a=($b=ctx).$instance_exec,$a._p=self.body.$to_proc(),$a).call($b,$scope.OutputBuffer.$new())};return function($base,$super){function $OutputBuffer(){}var self=$OutputBuffer=$klass($base,$super,"OutputBuffer",$OutputBuffer);var def=$OutputBuffer._proto,$scope=$OutputBuffer._scope;def.buffer=nil;def.$initialize=function(){var self=this;return self.buffer=[]};def.$append=function(str){var self=this;return self.buffer["$<<"](str)};def["$append="]=function(content){var self=this;return self.buffer["$<<"](content)};return def.$join=function(){var self=this;return self.buffer.$join()},nil}(self,null)}(self,null)})(Opal);